# BatchGitCloner 说明文档

- [English Documentation](README.md)
- [中文文档](README-ZH.md)

## 项目简介
还在烦恼微服务项目，多个拉取的问题嘛？BatchGitCloner 是一个用于批量克隆 Git 仓库的 Go 语言工具。它通过读取 JSON 配置文件，能够同时克隆多个指定分支的仓库到本地统一目录，简化了多仓库管理流程。

## 功能特点
- **批量操作**：支持一次性配置多个仓库的克隆任务，提高工作效率。
- **灵活配置**：可通过 JSON 文件指定仓库 URL、目标分支及本地存储路径。
- **智能处理**：自动创建目录结构，对已存在的目录进行处理，并输出详细的执行日志。

## 使用方法

### 环境准备
确保已安装 Go 语言环境（Go 1.20 或更高版本），并已安装 Git 工具。

### 配置 JSON 文件
创建一个 JSON 文件（例如 `repos.json`），按照以下格式填写仓库信息：
```
{
"basePath": "D:\\Code\\go",
"repos": [
{
"url": "https://github.com/sakura-py/BatchGitCloner.git",
"branch": "master",
"path": ""
},
{
"url": "https://github.com/sakura-py/BatchGitCloner.git",
"branch": "master",
"path": ""
}
]
}
```
- basePath ：统一的项目目录路径，所有仓库都将克隆到此目录下。
- repos ：仓库列表，包含多个仓库的详细信息。
- url ：Git 仓库的 URL 地址（必须包含 .git 后缀）。
- branch ：要克隆的仓库分支名称。
- path ：仓库在本地的子路径（可选）。如果为空，则使用仓库名称作为子目录。

### 运行程序
在命令行中运行以下命令，启动 BatchGitCloner 工具：
```
go run main.go
```
或

```
go build main.go
```
程序会提示输入 JSON 文件路径，输入刚才创建的 `repos.json` 文件路径后，程序将按照配置进行仓库克隆操作。

## 代码结构说明

### 主要结构体
- RepoInfo ：用于存储单个仓库的信息，包括仓库 URL、分支名称和本地路径。
- Config ：存储整个配置信息，包含统一的项目目录和仓库列表。

### 核心逻辑
- **读取配置**：通过标准输入获取 JSON 文件路径，读取并解析文件内容到 Config 结构体中。
- **目录准备**：检查并创建统一的项目目录，确保克隆目标路径有效。
- **克隆操作**：遍历仓库列表，根据每个仓库的配置生成完整的克隆路径，执行 Git 克隆命令，并实时输出命令执行结果。

## 常见问题解答

Q1：如何处理克隆过程中出现的错误？
A1：程序会对每个仓库的克隆操作进行单独处理，即使某个仓库克隆失败，也不会影响其他仓库的克隆。错误信息会记录在日志中，方便排查问题。

Q2：是否可以修改克隆的目录结构？
A2：是的，可以通过修改 JSON 配置文件中的 path 字段来自定义每个仓库的本地存储路径。

Q3：如何更新已克隆的仓库？
A3：目前工具主要针对克隆操作。如果需要更新已克隆的仓库，可以在对应仓库目录下手动执行 Git 拉取命令，或者扩展本工具的功能来支持仓库更新操作。
